<style>.sortable { list-style-type: none;}</style><script>$.noConflict();jQuery(document).ready(function(){		jQuery( ".sortable" ).sortable();		jQuery.fn.checkUpdateContainer = function(){							 var column = [];			 			 var fields =jQuery(":input").serializeArray();			  jQuery.each(fields, function(i, field){					jQuery("[name='"+field.name+"']").attr('value',field.value);					jQuery("[name='"+field.name+"'] option[value='"+field.value+"']").attr('selected', 'selected');					jQuery("[name='"+field.name+"']").attr('checked', 'checked');					var id = jQuery("[name='"+field.name+"']").attr('id');					if(id)						column.push(id);			  });			  			  var picklist_holder =jQuery(".picklist_holder").serializeArray();			  jQuery.each(picklist_holder, function(i, field){					jQuery("[name='"+field.name+"']").val(field.value);					jQuery("[name='"+field.name+"']").text(field.value);					var id = jQuery("[name='"+field.name+"']").attr('id');					if(id)						column.push(id);			  });			  			  var values_array = [];			  var continue_flag = 1;			  			  jQuery.each(column, function(i, id){				var value = jQuery("[id='"+id+"']").val();				var myregexp = /columnname/;				var match = myregexp.exec(id);				if (match != null) {										for(var i=0;i<values_array.length;i++) {						if(values_array[i] === value) {							alert('Column Name / Field Name: '+value+' cannot have the same value');							continue_flag = 0;						}					}						values_array.push(value);				}							  });			  			  			jQuery("#field_block_container").val(jQuery("#mod_container_block").html());						if(continue_flag ==1)				return true;			else				return false	}		jQuery.fn.updateFields = function(){ 			return this.each(function () {				var B = jQuery(this); 				B.unbind().change(function(e){					e.preventDefault();					var field_mapping = { 						1: { typedata: 'V~O~LE~100', columntype: 'VARCHAR(100)'}, 						4: { typedata: 'V~O', columntype: 'VARCHAR(100)'}, 						7: { typedata: 'NN~O~10,0', columntype: 'DECIMAL(11,0)'}, 						71: { typedata: 'N~O~10,2', columntype: 'DECIMAL(13,2)'}, 						9: { typedata: 'N~O~2~2', columntype: 'DECIMAL(5,2)'},						5: { typedata: 'D~O', columntype: 'DATE'},						13: { typedata: 'E~O', columntype: 'VARCHAR(50)'},						11: { typedata: 'V~O', columntype: 'VARCHAR(30)'},						15: { typedata: 'V~O', columntype: 'VARCHAR(255)'},						56: { typedata: 'C~O', columntype: 'VARCHAR(3)'},						21: { typedata: 'V~O', columntype: 'TEXT'},						33: { typedata: 'V~O', columntype: 'TEXT'},						26: { typedata: 'V~O', columntype: 'INT(19)'},						69: { typedata: 'V~O', columntype: 'TEXT'},						10: { typedata: 'V~O', columntype: 'VARCHAR(20)'},						}					var field_common = B.attr('id').split('^_^');					var uitype = parseInt(B.val());					jQuery('#'+field_common[0]+'_typedata').val(field_mapping[uitype]['typedata']);					jQuery('#'+field_common[0]+'_columntype').val(field_mapping[uitype]['columntype']);								});		});	}	jQuery("[class='uitype_select']").updateFields();		jQuery.fn.del_block = function(){ 			return this.each(function () {				var B = jQuery(this); 				B.unbind().click(function(e){					e.preventDefault();					B.parent().remove();			});		});	}	jQuery("[class='del_block']").del_block();	jQuery("[class='del_field']").del_block();		jQuery.fn.add_field = function(){ 			return this.each(function () {				var B = jQuery(this); 				B.unbind().click(function(e){					e.preventDefault();					var field_container = B.attr('id');					var field_counter = jQuery("#counter_"+field_container).val();					field_counter++;					jQuery("#counter_"+field_container).val(field_counter);					jQuery("#container_"+field_container+" ul").append('<li><div class="fields" id="'+field_container+'_field_'+field_counter+'">'+					'<table>'+					'	<tr>'+					'		<td>Field Label: <input type="text" id="'+field_container+'_field_'+field_counter+'_label" name="'+field_container+'_field_'+field_counter+'_label"/></td>'+					'		<td>Column Name / Field Name: <input type="text" id="'+field_container+'_field_'+field_counter+'_columnname" name="'+field_container+'_field_'+field_counter+'_columnname"/></td>'+					'		<td>UI Type: '+					'<select class="uitype_select" id="'+field_container+'_field_'+field_counter+'^_^uitype" name="'+field_container+'_field_'+field_counter+'_uitype">'+					'<option value="0">--</option>'+					'<option value="1">Text</option>'+					'<option value="4">Incremantal</option>'+					'<option value="7">Number</option>'+					'<option value="71">Currency</option>'+					'<option value="9">Percent</option>'+					'<option value="5">Date</option>'+					'<option value="13">Email</option>'+					'<option value="11">Phone</option>'+					'<option value="15">Picklist</option>'+					'<option value="56">Checkbox</option>'+					'<option value="21">Textarea</option>'+					'<option value="33">Multi-Select-Box</option>'+					'<option value="26">Folder</option>'+					'<option value="69">Product Image</option>'+					'<option value="10">Relation</option>'+					'</select>'+					'</td>'+					'		<td>Column Type: <input type="text" id="'+field_container+'_field_'+field_counter+'_columntype" name="'+field_container+'_field_'+field_counter+'_columntype"/></td>'+					'	</tr>'+					'	<tr>'+					'		<td>Type of Data: <input type="text" id="'+field_container+'_field_'+field_counter+'_typedata" name="'+field_container+'_field_'+field_counter+'_typedata" /></td>'+					'		<td>Set PickList Values: <textarea class="picklist_holder" style="margin: 0px; height: 125px; max-width: 214px; id="'+field_container+'_field_'+field_counter+'_picklist" name="'+field_container+'_field_'+field_counter+'_picklist"></textarea></td>'+					'		<td>Set Relationship: <input type="text" id="'+field_container+'_field_'+field_counter+'_relationship" name="'+field_container+'_field_'+field_counter+'_relationship"/></td>'+					'		<td> Related List(include): <input type="checkbox" id="'+field_container+'_field_'+field_counter+'_relatedlist" name="'+field_container+'_field_'+field_counter+'_relatedlist" value="1">'+					'</br>Search List(include): <input type="checkbox" id="'+field_container+'_field_'+field_counter+'_search" name="'+field_container+'_field_'+field_counter+'_search" value="1">'+					'</br>List View(include): <input type="checkbox" id="'+field_container+'_field_'+field_counter+'_listview" name="'+field_container+'_field_'+field_counter+'_listview" value="'+field_container+'_field_'+field_counter+'">'+					'</br>Module Identifier(atleast 1): <input type="checkbox" id="'+field_container+'_field_'+field_counter+'_identifier" name="'+field_container+'_field_'+field_counter+'_identifier" value="'+field_container+'_field_'+field_counter+'">'+					'</br>List Link Field(only 1): <input type="checkbox" id="'+field_container+'_field_'+field_counter+'_link" name="'+field_container+'_field_'+field_counter+'_link" value="1"></td>'+					'	</tr>'+  					'	</table>'+					'<button class="del_field">remove</button></div></li>');										jQuery("[class='uitype_select']").updateFields();					jQuery("[class='del_field']").del_block();			});		});	}	jQuery("[class='add_field']").add_field();				jQuery("#add_block").click(function(){		var block_counter = jQuery('#block_counter').val();		block_counter++;		jQuery('#block_counter').val(block_counter);				jQuery('#blocks_container').		append('<div class="block" id="block_'+block_counter+'">Block Name: <input type="text" name="block_'+block_counter+'_name" id="block_'+block_counter+'_name"/></br>'+		'<input type="hidden" id="counter_field_block_'+block_counter+'" value="0"/>'+		'<div id="container_field_block_'+block_counter+'"><ul class="sortable"></ul></div>'+		'<button class ="add_field" id="field_block_'+block_counter+'">add_field</button>'+		'<button class="del_block">remove</button></div>');				jQuery( ".sortable" ).sortable();		jQuery("[class='del_block']").del_block();		jQuery("[class='add_field']").add_field();	});	 	jQuery(".del_block").click(function(){		jQuery.fn.del_block();	});		jQuery(".add_field").click(function(){		jQuery.fn.add_field();	});	});</script><div id="mod_container">	<button id="add_block">Add Block</button>	<form name="input" action="index.php?module=ModCreator&action=index&controller=Home&controller_action=createModule" method="post">		<div id="mod_container_block">			<?php echo $data['html'];?>		</div>				<input type="hidden" name="record_module" value="<?php echo $data['record_module'];?>">		<input type="hidden" name="action_mode" value="<?php echo $data['action_mode'];?>">		<input type="submit" value="Submit" onclick="if(jQuery.fn.checkUpdateContainer())return true; else return false;">	</form></div>